"use client";
import { motion } from "framer-motion";
import { useLanguage } from "./LanguageProvider";
import { translations } from "@/app/i18n";

// Fallback SVG pre prípad, že dôjde k chybe v indexe
function DefaultIcon() {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      className="w-14 h-14 text-gray-300 mb-2"
      viewBox="0 0 24 24"
      fill="#a3a3a3"
    >
      <circle cx="12" cy="12" r="10" />
      <text x="12" y="17" textAnchor="middle" fontSize="10" fill="#fff">?</text>
    </svg>
  );
}

// SVGs pre jednotlivé kroky (poradie musí zodpovedať lectio_steps)
const icons = [
  // LECTIO
  <svg
    key="lectio"
    xmlns="http://www.w3.org/2000/svg"
    className="w-14 h-14 text-indigo-400 mb-2"
    viewBox="0 0 512 512"
    fill="#4a5085"
  >
    <path d="M291.057,242.811c1.51,2.953,4.514,4.659,7.62,4.659c1.297,0,2.628-0.299,3.866-0.93
      c0.503-0.256,50.731-25.771,75.503-33.596c4.489-1.425,6.98-6.221,5.555-10.709c-1.417-4.489-6.178-6.989-10.709-5.572
      c-26.095,8.252-75.981,33.596-78.097,34.671C290.596,233.467,288.924,238.605,291.057,242.811z"/>
    <path d="M298.677,145.071c1.297,0,2.628-0.299,3.866-0.93c0.503-0.256,50.731-25.771,75.503-33.596
      c4.489-1.425,6.98-6.221,5.555-10.709c-1.417-4.489-6.178-6.989-10.709-5.572c-26.095,8.252-75.981,33.596-78.097,34.671
      c-4.198,2.133-5.871,7.27-3.738,11.477C292.567,143.364,295.571,145.071,298.677,145.071z"/>
    <path d="M503.469,128.004c-4.719,0-8.533,3.823-8.533,8.533v332.8c0,14.114-11.486,25.6-25.6,25.6h-204.8v-19.635
      c12.442-4.352,44.851-14.498,76.8-14.498c74.334,0,124.809,16.461,125.312,16.631c2.568,0.853,5.436,0.427,7.68-1.178
      c2.227-1.604,3.541-4.181,3.541-6.921V93.871c0-4.002-2.773-7.467-6.682-8.329c0,0-6.69-1.493-18.125-3.593
      c-4.617-0.853-9.079,2.219-9.933,6.844c-0.853,4.642,2.21,9.088,6.844,9.941c4.361,0.802,8.013,1.51,10.829,2.074v357.188
      c-19.337-5.069-62.276-14.259-119.467-14.259c-37.18,0-73.702,12.211-85.001,16.35c-10.044-4.437-40.405-16.35-77.133-16.35
      c-58.778,0-107.196,9.694-128,14.618V100.475c17.041-4.19,67.371-15.138,128-15.138c31.113,0,57.796,9.685,68.267,14.063v335.804
      c0,3.072,1.655,5.914,4.326,7.424c2.671,1.519,5.965,1.476,8.602-0.111c0.845-0.503,85.393-51.004,160.435-76.015
      c3.49-1.169,5.837-4.42,5.837-8.098V8.537c0-2.799-1.374-5.419-3.678-7.014c-2.287-1.596-5.222-1.963-7.859-0.981
      C346.856,26.15,277.771,69.141,277.079,69.568c-3.994,2.5-5.214,7.765-2.714,11.759c2.492,3.994,7.757,5.214,11.759,2.714
      c0.631-0.401,60.732-37.794,123.477-63.027v331.281c-58.249,20.241-119.066,53.291-145.067,68.087V93.871
      c0-3.234-1.826-6.187-4.719-7.637c-1.468-0.725-36.437-17.963-80.614-17.963c-77.107,0-136.388,16.683-138.88,17.399
      c-3.661,1.041-6.187,4.395-6.187,8.201v375.467c0,2.671,1.263,5.197,3.388,6.81c1.502,1.135,3.311,1.724,5.146,1.724
      c0.785,0,1.57-0.111,2.338-0.333c0.589-0.162,59.597-16.734,134.195-16.734c31.198,0,57.856,9.711,68.267,14.071v20.062h-204.8
      c-14.114,0-25.6-11.486-25.6-25.6v-332.8c0-4.71-3.823-8.533-8.533-8.533s-8.533,3.823-8.533,8.533v332.8
      c0,23.526,19.14,42.667,42.667,42.667h426.667c23.526,0,42.667-19.14,42.667-42.667v-332.8
      C512.002,131.827,508.188,128.004,503.469,128.004z"/>
    <path d="M291.057,191.611c1.51,2.953,4.514,4.659,7.62,4.659c1.297,0,2.628-0.299,3.866-0.93
      c0.503-0.256,50.731-25.771,75.503-33.596c4.489-1.425,6.98-6.221,5.555-10.709c-1.417-4.489-6.178-6.989-10.709-5.572
      c-26.095,8.252-75.981,33.596-78.097,34.671C290.596,182.267,288.924,187.405,291.057,191.611z"/>
    <path d="M291.057,294.011c1.51,2.953,4.514,4.659,7.62,4.659c1.297,0,2.628-0.299,3.866-0.93
      c0.503-0.256,50.731-25.771,75.503-33.596c4.489-1.425,6.98-6.221,5.555-10.709c-1.417-4.489-6.178-6.989-10.709-5.572
      c-26.095,8.252-75.981,33.596-78.097,34.671C290.596,284.667,288.924,289.805,291.057,294.011z"/>
    <path d="M206.748,158.366c-52.693-12.365-112.572,3.388-115.089,4.062c-4.548,1.22-7.253,5.896-6.033,10.453
      c1.024,3.814,4.471,6.323,8.235,6.323c0.734,0,1.476-0.094,2.219-0.29c0.572-0.162,58.223-15.326,106.778-3.934
      c4.565,1.067,9.182-1.775,10.257-6.366C214.189,164.032,211.339,159.441,206.748,158.366z"/>
    <path d="M206.748,209.566c-52.693-12.356-112.572,3.388-115.089,4.062c-4.548,1.22-7.253,5.897-6.033,10.453
      c1.024,3.814,4.471,6.323,8.235,6.323c0.734,0,1.476-0.094,2.219-0.29c0.572-0.162,58.223-15.326,106.778-3.934
      c4.565,1.067,9.182-1.775,10.257-6.366C214.189,215.232,211.339,210.641,206.748,209.566z"/>
    <path d="M291.057,345.211c1.51,2.953,4.514,4.659,7.62,4.659c1.297,0,2.628-0.299,3.866-0.93
      c0.503-0.256,50.731-25.771,75.503-33.596c4.489-1.425,6.98-6.221,5.555-10.709c-1.417-4.488-6.178-6.989-10.709-5.572
      c-26.095,8.252-75.981,33.596-78.097,34.671C290.596,335.867,288.924,341.005,291.057,345.211z"/>
    <path d="M206.748,260.766c-52.693-12.356-112.572,3.379-115.089,4.062c-4.548,1.22-7.253,5.897-6.033,10.453
      c1.024,3.814,4.471,6.332,8.235,6.332c0.734,0,1.476-0.102,2.219-0.299c0.572-0.162,58.223-15.326,106.778-3.934
      c4.565,1.067,9.182-1.775,10.257-6.366C214.189,266.432,211.339,261.841,206.748,260.766z"/>
    <path d="M206.748,363.166c-52.693-12.365-112.572,3.388-115.089,4.062c-4.548,1.22-7.253,5.897-6.033,10.453
      c1.024,3.814,4.471,6.332,8.235,6.332c0.734,0,1.476-0.102,2.219-0.299c0.572-0.162,58.223-15.326,106.778-3.934
      c4.565,1.058,9.182-1.775,10.257-6.366C214.189,368.832,211.339,364.241,206.748,363.166z"/>
    <path d="M206.748,311.966c-52.693-12.365-112.572,3.379-115.089,4.062c-4.548,1.22-7.253,5.897-6.033,10.453
      c1.024,3.814,4.471,6.332,8.235,6.332c0.734,0,1.476-0.102,2.219-0.299c0.572-0.162,58.223-15.326,106.778-3.934
      c4.565,1.067,9.182-1.775,10.257-6.366C214.189,317.632,211.339,313.041,206.748,311.966z"/>
  </svg>,
  // MEDITATIO
  <svg
    key="meditatio"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 516.657 516.657"
    className="w-14 h-14 text-indigo-400 mb-2"
    fill="#4a5085"
  >
    <path d="M487.404 134.943c-15.433-17.093-35.591-28.433-57.82-32.747-1.316-18.283-8.667-35.487-21.202-49.247-14.773-16.219-34.978-25.713-56.893-26.734-12.913-.609-25.528 1.78-37.119 6.945-18.304-19.896-43.535-31.77-70.994-33.05-23.558-1.094-46.984 5.988-65.946 19.955-14.661 10.8-26.212 25.345-33.44 41.872-5.676-1.104-11.439-1.797-17.244-2.067-65.413-3.073-121.055 47.663-124.102 113.045-2.195 47.086 23.782 90.834 65.415 111.684 3.283 21.936 16.314 40.779 34.581 51.921-6.026 10.335-9.496 22.335-9.496 35.137 0 38.599 31.402 70 70 70 34.515 0 63.256-25.116 68.955-58.028.484.008.969.034 1.453.034 26.318-.002 51.089-11.993 67.49-32.025 12.71 8.537 27.546 13.48 43.141 14.207 20.277.945 40.235-5.432 56.186-17.958 12.872-10.109 22.491-23.686 27.768-38.969 47.64-8.597 83.961-49.271 86.262-98.604 1.298-27.885-8.288-54.652-26.995-75.371zm-324.261 276.714c-22.056 0-40-17.944-40-40s17.944-40 40-40 40 17.944 40 40-17.944 40-40 40zm321.286-202.739c-1.764 37.846-31.531 68.563-69.239 71.452-6.679.512-12.21 5.39-13.551 11.953-2.577 12.611-9.609 23.965-19.802 31.97-10.291 8.081-23.174 12.177-36.26 11.585-14.075-.656-27.196-6.64-36.946-16.85-3.354-3.512-8.201-5.18-13.006-4.484-4.806.698-8.976 3.68-11.191 8.002-10.204 19.906-31.213 32.08-53.528 31.056-.047-.002-.093-.007-.139-.009-7.987-29.869-35.272-51.936-67.624-51.936-14.568 0-28.108 4.478-39.324 12.123-15.443-6.575-26.302-21.777-26.565-39.435-.09-6.026-3.778-11.414-9.364-13.678-34.814-14.11-57.028-48.814-55.278-86.356 2.278-48.856 43.897-86.743 92.735-84.475 8.021.375 15.931 1.821 23.509 4.299 3.904 1.276 8.161.896 11.777-1.052s6.275-5.294 7.356-9.257c4.304-15.775 13.976-29.841 27.234-39.607 13.634-10.041 29.794-14.917 46.756-14.143 22.685 1.059 43.229 12.316 56.365 30.887 4.684 6.624 13.786 8.322 20.542 3.835 9.275-6.156 20.073-9.119 31.207-8.617 13.91.648 26.734 6.675 36.111 16.97 9.377 10.294 14.184 23.623 13.535 37.531-.043.925-.125 1.947-.25 3.125-.433 4.085.827 8.168 3.487 11.298s6.487 5.031 10.588 5.262c40.987 2.301 72.777 37.539 70.865 78.551z"/>
    <path d="M52.143 416.657c-27.57 0-50 22.43-50 50s22.43 50 50 50 50-22.43 50-50-22.43-50-50-50zm0 70c-11.028 0-20-8.972-20-20s8.972-20 20-20 20 8.972 20 20-8.972 20-20 20z"/>
  </svg>,
  // ORATIO
  <svg
    key="oratio"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 64 64"
    className="w-14 h-14 text-indigo-400 mb-2"
    fill="#4a5085"
  >
    <path d="m56.95117 43.9209-3.92041-3.9209a3.105 3.105 0 0 0 -4.5117.26908l-2.51271-1.48685a3.0539 3.0539 0 0 1 -1.49854-2.84571l.44483-6.60839a11.06321 11.06321 0 0 0 -.72071-4.71778l-7.21582-18.5791a3.04842 3.04842 0 0 0 -4.98089-1.10089 3.03879 3.03879 0 0 0 -1.317-.80438 3.09259 3.09259 0 0 0 -3.73437 1.83593l-7.21578 18.58009c-1.3494 2.83758-.3692 8.29357-.27589 11.3262a3.0544 3.0544 0 0 1 -1.49853 2.84665l-2.512 1.48651a3.04917 3.04917 0 0 0 -4.51191-.26967l-3.92091 3.92085a.99962.99962 0 0 0 0 1.41406l14.37207 14.37207a.99962.99962 0 0 0 1.41406 0l3.9209-3.9209a3.0142 3.0142 0 0 0 0-4.24218l-.39884-.39887c.958-.75763 4.68556-3.45176 5.62634-5.70468.91964 2.28558 4.682 4.99657 5.65961 5.77312a3.29964 3.29964 0 0 0 -1.27718 2.5199 2.98081 2.98081 0 0 0 .87838 2.12107l3.92083 3.92087a.99962.99962 0 0 0 1.41406 0l14.37211-14.372a.99962.99962 0 0 0 0-1.4141z"/>
  </svg>,
  // CONTEMPLATIO
  <svg
    key="contemplatio"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 48 48"
    className="w-14 h-14 text-indigo-400 mb-2"
    fill="#4a5085"
  >
    <path d="M40,16.025V11a7.008,7.008,0,0,0-7-7H15a7.008,7.008,0,0,0-7,7v5.025a5.5,5.5,0,0,0-3,9.716V35a5,5,0,0,0,3,4.576V42a2,2,0,0,0,2,2h2a2,2,0,0,0,2-2V40H34v2a2,2,0,0,0,2,2h2a2,2,0,0,0,2-2V39.576A5,5,0,0,0,43,35V25.741a5.5,5.5,0,0,0-3-9.716ZM15,6H33a5.006,5.006,0,0,1,5,5v5.213A5.506,5.506,0,0,0,34,21.5v6.309A64.945,64.945,0,0,0,24,27a64.945,64.945,0,0,0-10,.809V21.5a5.506,5.506,0,0,0-4-5.287V11A5.006,5.006,0,0,1,15,6ZM12,42H10V40h2Zm26,0H36V40h2Zm3.443-17.59a1,1,0,0,0-.443.83V35a3,3,0,0,1-3,3H10a3,3,0,0,1-3-3V25.24a1,1,0,0,0-.443-.83A3.5,3.5,0,1,1,12,21.5V29a1,1,0,0,0,.366.773.991.991,0,0,0,.83.207A62.407,62.407,0,0,1,24,29a62.407,62.407,0,0,1,10.8.98A1,1,0,0,0,36,29V21.5a3.5,3.5,0,1,1,5.443,2.91Z"/>
  </svg>,
  // ACTIO
  <svg
    key="actio"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
    className="w-14 h-14 text-indigo-400 mb-2"
    fill="#4a5085"
  >
    <path d="M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z"/>
    <path d="M19 19H5C4.45 19 4 19.45 4 20S4.45 21 5 21H19C19.55 21 20 20.55 20 20S19.55 19 19 19Z"/>
    <path d="M7 15H17C17.55 15 18 14.55 18 14S17.55 13 17 13H7C6.45 13 6 13.45 6 14S6.45 15 7 15Z"/>
  </svg>
];

type LectioStep = {
  title: string;
  desc: string;
};

export default function LectioStepsSection() {
  const { lang } = useLanguage();
  const t = translations[lang as keyof typeof translations] ?? translations.sk;
  const steps = Array.isArray(t.lectio_steps_new) ? t.lectio_steps_new : [];

  return (
    <section className="relative z-20 bg-gray-100 py-16 min-h-screen flex items-center">
      <div className="max-w-6xl mx-auto px-8 w-full">
        <div className="text-center mb-16">
          <h2 className="text-4xl sm:text-5xl md:text-6xl font-bold bg-gradient-to-r from-slate-800 via-blue-800 to-purple-800 bg-clip-text text-transparent mb-6">
            {t.lectioStepsSection.title}
          </h2>
          <div className="w-24 h-1.5 mx-auto bg-gradient-to-r from-blue-600 to-purple-600 rounded-full mb-6"></div>
          <p className="text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed">
            {t.lectioStepsSection.subtitle}
          </p>
        </div>
        
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8">
          {steps.map((step: LectioStep, idx: number) => (
            <motion.div
              key={step.title || idx}
              initial={{ opacity: 0, y: 60, scale: 0.9 }}
              whileInView={{ opacity: 1, y: 0, scale: 1 }}
              viewport={{ once: true, amount: 0.4 }}
              transition={{ 
                duration: 0.7, 
                delay: idx * 0.15,
                ease: "easeOut"
              }}
              whileHover={{
                scale: 1.08,
                y: -10,
                transition: { duration: 0.3 }
              }}
              className="group relative"
            >
              {/* Card background with glass effect */}
              <div className="absolute inset-0 bg-gradient-to-br from-white/80 to-white/60 backdrop-blur-sm rounded-3xl shadow-xl group-hover:shadow-2xl transition-all duration-300"></div>
              <div className="absolute inset-0 bg-gradient-to-br from-transparent via-white/10 to-transparent rounded-3xl"></div>
              
              {/* Card content */}
              <div className="relative p-8 sm:p-10 flex flex-col items-center text-center h-full">
                {/* Enhanced icon with glow effect */}
                <div className="mb-6 group-hover:scale-110 transition-transform duration-300">
                  {icons[idx] || <DefaultIcon />}
                </div>
                
                {/* Step number */}
                <div className="absolute top-4 right-4 w-8 h-8 bg-gradient-to-r from-slate-600 to-slate-800 text-white text-sm font-bold rounded-full flex items-center justify-center">
                  {idx + 1}
                </div>
                
                <h3 className="font-bold text-xl sm:text-2xl text-slate-800 mb-4 tracking-wide group-hover:text-blue-700 transition-colors duration-300">
                  {step.title}
                </h3>
                
                <p className="text-slate-600 text-sm sm:text-base leading-relaxed group-hover:text-slate-700 transition-colors duration-300">
                  {step.desc}
                </p>
                
                {/* Decorative bottom accent */}
                <div className="absolute bottom-0 left-1/2 transform -translate-x-1/2 w-16 h-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              </div>
            </motion.div>
          ))}
        </div>
      </div>
    </section>
  );
}